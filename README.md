## Оглавление
 1. [Описание проекта](#1)
 2. [TODO лист](#2)
 3. [Используемые технологии](#3)
 4. [Видеодемонстрация работы](#4)
 5. [Инструкция по сборке](#5)
 6. [Cхема БД](#6)
 7. [Примечание](#7)
 
<a name="1"><h2>Описание проекта</h2></a>
Реализовать приложение для автоматизации учёта машин у автодилера. Автодилер должен иметь возможность:

  - учесть приход и отпуск машин;
  - узнать общее количество машин определенного цвета и лошадиных сил в данный момент времени.

Внешний интерфейс приложения представлен в виде HTTP API (REST, если хочется).

[Полное описание задания](https://docs.google.com/document/d/1cBMC7xx2fRbxjFqF1uyRYIxPXWX1FvSyHmTRGPWysA0/edit#)

<a name="2"><h2>TODO лист</h2></a>
 - [x] Написано на Java;
 - [x] Standalone;
 - [x] Headless;
 - [x] Приложение основано на Spring(Boot) Framework;
 - [x] PostgreSQL;
 - [x] Для версионирования схемы базы данных используется Flyway;
 - [x] База данных поднимается рядом с приложением в докер-контейнере.

<a name="3"><h2>Используемые технологии</h2></a>
 - Intellij Idea Ultimate;
 - PostgreSQL;
 - Apache Tomcat;
 - Docker;
 - Spring;
 - Maven;
 - Flyway.

<a name="4"><h2>Видеодемонстрация работы</h2></a>
[Видео](https://www.youtube.com/watch?v=2fKaklwAaBo)
<a name="5"><h2>Инструкция по запуску приложения</h2></a>
В данной инструкции приводится пример для запуска приложения через Intellij Idea Ultimate.

Первым делом надо запустить `docker-container` с БД. Это можно сделать двумя способами:

_Первый способ_. В качестве конфигурации выбрать файл `docker-compose.yaml` и соответственно запустить.

_Второй способ_. Перейти в файл `docker-compose.yaml` и около поля `pg_db` нажать на зеленую стрелку.

После запуска контейнера надо подключиться к самой БД(используется PostgreSQL). Данные для подключения указаны в файле `docker-compose.yaml` в соответсвующих полях 
(пароль пользователя, имя пользователя, название БД) `POSTGRES_PASSWORD`, `POSTGRES_USER`, `POSTGRES_DB`. Порт для подключения `5434`.

Далее надо запустить скрипты миграции(файлы `V1__Create_table_cars.sql` и `V2__Add_cars.sql`) с помощью консольной команды:

```ShellSession
$ mvn flyway:migrate
```
Как ясно из названия миграционных скриптов, они создадут таблицу и заполнят её первоначальными данными.
На этом все подготовительные работы закончены, можно запускать само приложение.

Чтобы запусить приложение понадобится подключить Apache Tomcat к Intellij Idea. Для этого его надо скачать, если не скачан и добавить его в качестве конфигурации.

<a name="6"><h2>Схема БД</h2></a>
```SQL
TABLE cars
(
    id int PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    color varchar(20),
    horsepower int,
    quantity int
);
```
<a name="7"><h2>Примечание</h2></a>
В задании в разделе `Примеры запросов` во втором примере запроса
```HTTP
/api/cars?color=black&operation=lessThan?horsepower=200
```
ошибка после `lessThan` должен стоять `&`, а не `?`.




